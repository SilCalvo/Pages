<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROOMBA - LOCALICE VACUUM CLEANER</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background-image: url('roomba.png');
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: center;
            color: white;
            height: 100vh;
            display: flex;
        }
        .sidebar {
            width: 125px;
            position: fixed;
            top: 10px;
            left: 10px;
            padding: 20px;
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 8px;
            margin-right: 5px;
        }
        .content {
            padding: 20px;
            background-color: rgba(0, 0, 0, 0.5);
            max-width: calc(60% - 50px);
            margin: auto;
            border-radius: 8px;
            flex: 1;
        }
        .fixed-box {
            width: 75px;
            height: 35px;
            position: fixed; 
            bottom: 20px;
            background-color: rgba(0, 0, 0, 0.9);
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            text-decoration: none;
            font-size: 20px;
        }
        .left-box {
            left: 20px;
        }
        .right-box {
            right: 20px;
        }
        a {
            color: white;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>

<div class="sidebar">
    <h3>Índice</h3>
    <ul>
        <li><a href="#INTRODUCCION">Introducción</a></li>
        <li><a href="#BSA">BSA</a></li>
        <li><a href="#BFS">BFS</a></li>
        <li><a href="#MAPA_PIXEL">Mapa a píxel</a></li>
        <li><a href="#PRUEBAS">Pruebas</a></li>
        <li><a href="#RESULTADO_FINAL">Resultado final</a></li>
        <li><a href="#VIDEO_DE_MUESTRA">Video de muestra</a></li>
    </ul>
    <div style="text-align: center; margin-top: 20px;">
        <a href="index.html" style="font-weight: bold;">Volver a la página principal</a>
    </div>
</div>

<div class="content">
    <div style="text-align: center;">
        <big><big><span style="font-weight: bold;">ROOMBA - LOCALICE VACUUM CLEANER</span><br>
        <span style="font-weight: bold;">Silvia Calvo Cabello</span></big></big><br>
    </div>
    <br>
    
    <ul>
        <li><a name="INTRODUCCION"></a><span style="font-weight: bold;">INTRODUCCIÓN</span></li>
    </ul>
    El objetivo de esta práctica es desarrollar un programa que permita a un robot aspirador (similar a una Roomba) limpiar la mayor superficie posible de una vivienda de manera eficiente, empleando el algoritmo de cobertura <strong>BSA (Backtracking Spiral Algorithm)</strong>. 
    <br><br>
    Además, se implementan métodos de búsqueda y planificación como el <strong>BFS (Breadth-First Search)</strong> para resolver problemas de navegación y retorno, así como un sistema de transformación entre coordenadas del mapa y píxeles para visualizar el recorrido en el entorno simulado.
    <br><br>

    <ul>
        <li><a name="BSA"></a><span style="font-weight: bold;">BSA (Backtracking Spiral Algorithm)</span></li>
    </ul>
    El <strong>BSA</strong> es un algoritmo de cobertura diseñado para que un robot recorra sistemáticamente un área mientras evita obstáculos y minimiza la repetición de zonas ya visitadas. 
    <br><br>
    El robot avanza en una dirección principal (por ejemplo, norte) mientras el camino esté libre. Cuando encuentra un obstáculo o una celda visitada, gira siguiendo un orden de prioridad (este, sur, oeste, etc.) para continuar el recorrido. Si queda atrapado o sin celdas libres, utiliza un mecanismo de <em>backtracking</em> para retroceder a la última posición con opciones de movimiento disponibles. 
    <br><br>
    De esta manera, el algoritmo garantiza que se cubra el máximo espacio posible sin depender de un mapa previo completamente conocido.
    <br><br>

    <ul>
        <li><a name="BFS"></a><span style="font-weight: bold;">BFS (Breadth-First Search)</span></li>
    </ul>
    El <strong>BFS</strong> o <em>búsqueda en anchura</em> es un algoritmo de búsqueda en grafos que explora las celdas del mapa por niveles, garantizando encontrar el camino más corto hasta el objetivo. 
    <br><br>
    En este proyecto, se utiliza principalmente para localizar la <strong>celda libre más cercana</strong> cuando el robot necesita volver a un punto de retorno o escapar de una situación donde el BSA se ha estancado. 
    <br><br>
    De esta manera, el BFS complementa al BSA, proporcionando un mecanismo eficiente para reconducir el robot a zonas no exploradas.
    <br><br>

    <ul>
        <li><a name="MAPA_PIXEL"></a><span style="font-weight: bold;">MAPA A PÍXEL</span></li>
    </ul>
    Para traducir las coordenadas del mapa físico a la representación en píxeles, envié al robot a distintos puntos de referencia (esquinas y zonas intermedias) y registré sus coordenadas. Posteriormente, localicé los píxeles correspondientes en la imagen del mapa. 
    <br><br>
    Con estos pares de puntos, calculé la <strong>matriz de transformación</strong> entre ambos sistemas mediante el método de <em>mínimos cuadrados</em>. 
    <br><br>
    El código se organiza en dos funciones: una que genera la matriz de transformación y otra que aplica dicha matriz a cualquier punto, lo que permite transformar coordenadas de un sistema a otro o viceversa de manera flexible y reutilizable.
    <br><br>
    
    <ul>
        <li><a name="PRUEBAS"></a><span style="font-weight: bold;">PRUEBAS Y DESARROLLO</span></li>
    </ul>
    A lo largo del proyecto se realizaron diferentes versiones del algoritmo, ajustando su comportamiento hasta conseguir una cobertura completa y eficiente del entorno.

    <h4>ALGORITMO Nº1 - PRIMERA APROXIMACIÓN</h4>
    En la primera versión, se intentó crear un mapa en rejilla en <em>Unibotics</em>. Inicialmente hubo dificultades para representar las celdas y convertir las posiciones del robot en píxeles. 
    <br><br>
    En esta etapa, el BSA no estaba completamente implementado: el robot avanzaba sin control de dirección estable y no resolvía bien los puntos críticos. El cálculo de retorno se hacía mediante la <strong>distancia Manhattan</strong>, pero esta no consideraba los obstáculos ni las celdas ya visitadas, provocando bloqueos frecuentes.
    <br><br>

    <h4>ALGORITMO Nº2 - MEJORA DEL CONTROL</h4>
    En la segunda versión se mejoró el control de movimiento mediante un <strong>controlador PID</strong>. 
    Primero, el robot giraba hasta orientarse hacia el objetivo y luego avanzaba, pero esto generaba inestabilidad si el ángulo de error era grande. 
    <br><br>
    Se implementó una condición para evitar movimiento lineal cuando el ángulo de error superaba los 10°, lo que permitió giros más suaves y evitó colisiones con paredes. Esta mejora estabilizó el comportamiento del robot en entornos estrechos.
    <br><br>

    <h4>ALGORITMO V1</h4>
    En esta versión el algoritmo ya era funcional. Se sustituyó la distancia Manhattan por el <strong>BFS</strong> para calcular los puntos de retorno de forma más precisa. 
    <br><br>
    El robot mantenía su dirección mientras no encontrase obstáculos ni celdas visitadas, generando varios puntos críticos y de retorno. También se implementó un estado de “choque” que permitía retroceder brevemente en caso de impacto y reintentar una nueva dirección.
    <br><br>
    <img src="Servicephoto1.png" alt="Foto del mapa" style="width: 300px;"><br><br>
   
    <h4>ALGORITMO V2</h4>
    En esta versión se optimizó el comportamiento del BSA: el robot prioriza moverse siempre que sea posible en su dirección primaria (por ejemplo, norte), y solo cambia a direcciones secundarias cuando no puede avanzar. 
    <br><br>
    Esto redujo el número de puntos de retorno y mejoró la eficiencia del recorrido. El resultado fue una cobertura más fluida y menos redundante.
    <br><br>
    <img src="Servicephoto2.png" alt="Foto del mapa" style="width: 300px;"><br><br>

    <h4>ALGORITMO V3</h4>
    En esta versión se cambió el regristro del mapa ya que antes las delcillas se hcaian con un tamaño de 40 pixeles pero era necesario bajarlo a un tamaño menor del robot por loq ue se puso en 32. de esta manera no quedaban huecos vacíospor el recorrido.
    <br><br>
    Esto hace que tenga masceldillas y lo hace más lento.
    <br><br>
    <img src="Servicephoto2.png" alt="Foto del mapa" style="width: 300px;"><br><br>


    <ul>
        <li><a name="RESULTADO_FINAL"></a><span style="font-weight: bold;">RESULTADO FINAL</span></li>
    </ul>
    Las dos versiones finales muestran un comportamiento similar en tiempo total (entre 8 y 9 minutos para recorrer toda la casa), aunque difieren en el número de puntos de retorno. 
    <br><br>
    La <strong>Versión 1</strong> tiene más puntos de retorno y revisita algunas zonas, mientras que la <strong>Versión 2</strong> optimiza el recorrido con menos interrupciones. En ambas versiones, el robot consigue cubrir la totalidad del área en un tiempo parecido (8-9 min).
    <br><br>

    <ul>
        <li><a name="VIDEO_DE_MUESTRA"></a><span style="font-weight: bold;">VIDEO DE MUESTRA</span></li>

    En los siguientes videos (reproducido a velocidad x2) puede verse la ejecución del robot en Gazebo junto con la visualización de las zonas recorridas de. 
    <br><br>
    <a href="https://urjc-my.sharepoint.com/:v:/g/personal/s_calvo_2022_alumnos_urjc_es/EcUbdIHozy5DlRdJEC0CVQMBrlWcEfTz8vFCxREAYf8WjQ?nav=eyJyZWZlcnJhbEluZm8iOnsicmVmZXJyYWxBcHAiOiJTdHJlYW1XZWJBcHAiLCJyZWZlcnJhbFZpZXciOiJTaGFyZURpYWxvZy1MaW5rIiwicmVmZXJyYWxBcHBQbGF0Zm9ybSI6IldlYiIsInJlZmVycmFsTW9kZSI6InZpZXcifX0%3D&e=Plqnyd" style="color: white;">Ver el video V1</a>
    <br>
    <a href="https://urjc-my.sharepoint.com/:v:/g/personal/s_calvo_2022_alumnos_urjc_es/Ea1EAQRkGZ5Pvd5Ru4z4RjEB1-UajFw3rFKzRqv0HX_CwQ?nav=eyJyZWZlcnJhbEluZm8iOnsicmVmZXJyYWxBcHAiOiJTdHJlYW1XZWJBcHAiLCJyZWZlcnJhbFZpZXciOiJTaGFyZURpYWxvZy1MaW5rIiwicmVmZXJyYWxBcHBQbGF0Zm9ybSI6IldlYiIsInJlZmVycmFsTW9kZSI6InZpZXcifX0%3D&e=Jo6wmW" style="color: white;">Ver el video V2</a>
    <br>

     <br>
     <br>

</div>

<a href="index.html" class="fixed-box left-box">←</a>
<a href="index.html" class="fixed-box right-box">→</a>
</body>
</html>
